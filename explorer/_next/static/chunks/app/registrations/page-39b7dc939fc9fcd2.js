(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{7970:(e,r,t)=>{Promise.resolve().then(t.bind(t,4244))},4244:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>E});var s=t(7437),n=t(6463),a=t(2265),i=t(1444),l=t(6645),d=t(1960),c=t(7308),o=t(9793),h=t(358),g=t(9811),u=t(6712),x=t(6800),j=t.n(x),b=t(2574);let f=a.forwardRef((e,r)=>{let{bsPrefix:t,size:n,vertical:a=!1,className:i,role:l="group",as:d="div",...c}=e,o=(0,b.vE)(t,"btn-group"),h=o;return a&&(h="".concat(o,"-vertical")),(0,s.jsx)(d,{...c,ref:r,role:l,className:j()(i,h,n&&"".concat(o,"-").concat(n))})});f.displayName="ButtonGroup";var v=t(2514),p=t(5211),m=t(7346),Z=t(9671),k=t(8104),S=t(2909),w=t(9439),N=t(689),y=t(5809),M=t(5025);function E(){var e,r;let t=(0,i.I0)(),x=(0,n.useSearchParams)(),[j,b]=(0,a.useState)(!0),[p,E]=(0,a.useState)(void 0),[_,C]=(0,a.useState)(void 0),[R,T]=(0,a.useState)(void 0),[P,W]=(0,a.useState)(void 0),[A,B]=(0,a.useState)(void 0),[I,L]=(0,a.useState)([]),[O,Q]=(0,a.useState)({stakesBreakdown:{},signersWeight:{}});(0,a.useEffect)(()=>{let e;let r=x.get(Z.aggregatorSearchParam),s=x.get("epoch");C(r),(0,d.checkUrl)(r)?"latest"===s||Number.isInteger(Number(s))||(e="invalidEpoch"):e="invalidAggregatorUrl",void 0===e?((0,M.fetchRegistrations)(r,s).then(e=>{W(e.signing_at),T(e.registered_at),L(e.registrations),Q({stakesBreakdown:(0,l.Q2)(e.registrations),signersWeight:(0,l.Fw)(e.registrations)}),b(!1)}).catch(()=>{W(void 0),L([]),b(!1)}),(0,M.fetchEpochSettings)(r).then(e=>B(null==e?void 0:e.epoch)).catch(()=>{B(void 0)}),t((0,k.Q9)(r))):E(e)},[x]);let U=(0,a.useCallback)(e=>{let r=new URLSearchParams;return r.set("aggregator",_),r.set("epoch",e),"/registrations?".concat(r.toString())},[_]),F=U(R-1),D=U(A),H=U(R+1);if(void 0!==p){let e="";switch(p){case"invalidEpoch":e="The given epoch isn't an integer, please correct it and try again.";break;case"invalidAggregatorUrl":e="The given aggregator isn't a valid url, please correct it and try again.";break;default:e="Something went wrong"}return(0,s.jsxs)(c.Z,{gap:3,children:[(0,s.jsx)("h2",{children:"Registrations"}),(0,s.jsxs)(o.Z,{variant:"danger",children:[(0,s.jsx)(o.Z.Heading,{children:"Oh snap! You got an error!"}),(0,s.jsx)("p",{children:e})]})]})}return(0,s.jsxs)(c.Z,{gap:3,children:[(0,s.jsxs)("h2",{children:["Registrations"," ",(0,s.jsx)(N.Z,{href:"".concat(_,"/signers/registered/").concat(R),variant:"outline-light",size:"sm"})]}),(0,s.jsx)(h.Z,{children:(0,s.jsx)(g.Z,{children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Aggregator:"})}),(0,s.jsx)("td",{children:_})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Registration epoch:"})}),(0,s.jsx)("td",{children:R})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Signing at epoch:"})}),(0,s.jsx)("td",{children:null!=P?P:"?"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Number of signers:"})}),(0,s.jsx)("td",{children:null!==(e=null==I?void 0:I.length)&&void 0!==e?e:0})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:"Total stakes:"})}),(0,s.jsx)("td",{children:(0,s.jsx)(w.Z,{lovelace:null!==(r=null==I?void 0:I.reduce((e,r)=>e+r.stake,0))&&void 0!==r?r:0})})]})]})})}),(0,s.jsx)(h.Z,{children:Number.isInteger(R)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{xs:12,sm:12,md:3,lg:2,className:"d-grid mb-1",children:(0,s.jsxs)(S.Z,{href:D,disabled:void 0===A||A===R,children:["Current Cardano Epoch (",A,")"]})}),(0,s.jsx)(u.Z,{xs:12,sm:12,md:6,lg:4,className:"d-grid mb-1",children:(0,s.jsxs)(f,{children:[(0,s.jsxs)(S.Z,{href:F,children:["Previous Registration Epoch (",R-1,")"]}),(0,s.jsxs)(S.Z,{href:H,disabled:A<=R,children:["Next Registration Epoch (",R+1,")"]})]})})]})}),j?(0,s.jsx)(v.Z,{animation:"grow"}):void 0===I||0===I.length?(0,s.jsxs)(o.Z,{variant:"info",children:[(0,s.jsxs)(o.Z.Heading,{children:["No registrations for epoch ",R]}),(0,s.jsx)("p",{children:A===R?"The aggregator did not receive registrations yet for the current epoch.":A<R?"The epoch is in the future":"The aggregator may have pruned old registrations or wasn't running at this epoch."})]}):(0,s.jsxs)(h.Z,{children:[(0,s.jsxs)(u.Z,{xs:12,sm:12,md:7,children:[(0,s.jsx)("h3",{children:"Signers"}),(0,s.jsx)(y.Z,{signers:I,displayIndexes:!0})]}),(0,s.jsx)(u.Z,{xs:12,sm:12,md:5,children:(0,s.jsxs)(c.Z,{gap:3,children:[(0,s.jsx)("h3",{children:"Stakes breakdown"}),(0,s.jsx)(m.$Q,{data:O.stakesBreakdown}),(0,s.jsx)("h3",{children:"Signers weight"}),(0,s.jsx)(m.by,{data:O.signersWeight})]})})]})]})}p.kL.register(p.qi,p.uw,p.f$,p.ZL,p.Dx,p.u,p.De),(0,l.hZ)(p.kL)},6645:(e,r,t)=>{"use strict";t.d(r,{Fw:()=>a,Q2:()=>n,hZ:()=>i});var s=t(1960);function n(e){let r=e=>e/1e12,t=(null!=e?e:[]).map(e=>r(e.stake));return{labels:["< 1M₳","≥ 1M₳ < 10M₳","≥ 10M₳ < 25M₳","≥ 25M₳ < 50M₳","≥ 50M₳ < 75M₳","≥ 75M₳ < 100M₳","≥ 100M₳"],datasets:[{label:"Number of signers",data:[t.filter(e=>e<1).length,t.filter(e=>e>=1&&e<10).length,t.filter(e=>e>=10&&e<25).length,t.filter(e=>e>=25&&e<50).length,t.filter(e=>e>=50&&e<75).length,t.filter(e=>e>=75&&e<100).length,t.filter(e=>e>100).length]}]}}function a(e){let r=null!=e?e:[];return{labels:r.map(e=>e.party_id),datasets:[{label:"Stake (₳)",data:r.map(e=>(0,s.toAda)(e.stake))}]}}function i(e){let r=["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],t=["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"];e.defaults.plugins.legend.display=!1,e.defaults.elements.arc.backgroundColor=r,e.defaults.elements.arc.borderColor=t,e.defaults.elements.arc.borderWidth=1,e.defaults.elements.bar.backgroundColor=r,e.defaults.elements.bar.borderColor=t,e.defaults.elements.bar.borderWidth=1}},2909:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(7437);t(2265);var n=t(7138);function a(e){let{href:r,children:t,className:a,disabled:i,variant:l="primary",...d}=e;return!0===i?a="".concat(a," disabled"):i=!1,(0,s.jsx)(n.default,{href:r,"aria-disabled":i,className:"btn btn-".concat(l," link-underline-opacity-0 ").concat(a),...d,children:t})}},689:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var s=t(7437);t(2265);var n=t(6673),a=t(4539),i=t(2808);function l(e){return(0,s.jsx)(n.Z,{overlay:(0,s.jsx)(a.Z,{children:"Raw JSON"}),children:(0,s.jsx)(i.Z,{variant:"outline-secondary",target:"_blank",...e,children:(0,s.jsx)("i",{className:"bi bi-filetype-json",style:{color:"black"}})})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[674,957,779,231,602,809,130,215,744],()=>r(7970)),_N_E=e.O()}]);